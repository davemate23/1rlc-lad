{"filter":false,"title":"unicorn.rb","tooltip":"/config/unicorn.rb","undoManager":{"mark":0,"position":0,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":22,"column":3},"action":"insert","lines":["# config/unicorn.rb","worker_processes Integer(ENV[\"WEB_CONCURRENCY\"] || 3)","timeout 15","preload_app true","","before_fork do |server, worker|","  Signal.trap 'TERM' do","    puts 'Unicorn master intercepting TERM and sending myself QUIT instead'","    Process.kill 'QUIT', Process.pid","  end","","  defined?(ActiveRecord::Base) and","    ActiveRecord::Base.connection.disconnect!","end","","after_fork do |server, worker|","  Signal.trap 'TERM' do","    puts 'Unicorn worker intercepting TERM and doing nothing. Wait for master to send QUIT'","  end","","  defined?(ActiveRecord::Base) and","    ActiveRecord::Base.establish_connection","end"]}]}]]},"ace":{"folds":[],"scrolltop":38,"scrollleft":0,"selection":{"start":{"row":22,"column":3},"end":{"row":22,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":1,"state":"start","mode":"ace/mode/ruby"}},"timestamp":1421273916560,"hash":"8c8723fef926b6544c84ede6501020cdc03e9554"}